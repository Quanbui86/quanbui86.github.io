<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Login page</title>
	<link type="text/css" rel="stylesheet" href="reset.css">
    <link type="text/css" rel="stylesheet" href="style.css">
</head>

<body>
	<main>
		<section id="logSection">
			<div class="conntainer">
				<h1>Login Form</h1>
				<p name="welcome">“Please enter your username and password.”</p>
				<p name="loginSuccess" style="display: none">
					“<strong style="color: green;">Success!</strong>
					You will be redirected to the Home page shortly...”</p>
				</p>
				<form onsubmit="handleLogin()" class="flex-middle">
					<label for="logName" class="login-input">Username</label>
					<input id="logName" type="text" placeholder="Username" name="logName"/>
					<label for="logPass" class="login-input">Password</label>
					<input id="logPass" type="password" placeholder="Password" name="logPass"/>
					<div class="return-and-login">
                        <a type="button" href="register.html">Registration</a>
                        <button type="submit" value="Login">Login</button>
                    </div>
			</form>
			</div>
		</section>
	</main>
    <script>
		function handleLogin() {
            // Ngăn trang không load lại khi submit form
			event.preventDefault();
            //Khai báo biến, function - gán các biến vào các elements, value
            let welcome = document.querySelector("[name='welcome']")
            let loginSuccess = document.querySelector("[name='loginSuccess']")
            let logName = document.querySelector("[name='logName']").value
            let logPass = document.querySelector("[name='logPass']").value
            let auth = false;
            const Redirect = () =>{
                window.location.replace('./index.html')
            }
            // Kiểm tra các biến với giá trị đã lưu trong localStorage
            // Kiểm tra logName có tồn tại trong localStorage không? => logPass có trùng với password ko?
            if(localStorage.getItem(logName)){
                password = JSON.parse(localStorage.getItem(logName)).password
                if(logPass === password) {
                    auth = true;
                } else alert('Wrong password')
            } else alert('Username does not exist.')
            // Các điều kiện thõa mãn thì thông báo và chuyển trang
            if(auth){
                welcome.style.display = 'none';
                loginSuccess.style.display = 'block'
                setTimeout(Redirect, 900)
            }
		}
	</script>
</body>

</html>